# ESPHome WS2811 Channels

Control individual **WS2811 output channels** (R / G / B) as **separate light entities** in Home Assistant.

Normally, each WS2811 / WS2812 LED is treated as a single RGB pixel.  
This external component splits every pixel into **3 monochromatic lights** (Red, Green, Blue).  
That way, you can directly control each output channel as an individual light.

---

## ‚ú® Features
- Works with any `neopixelbus` strip using WS2811/WS2812.
- Creates **3 Light entities per pixel** (`Pixel 1 - Red`, `Pixel 1 - Green`, `Pixel 1 - Blue`).
- Full support in Home Assistant (on/off, brightness).
- Configurable number of pixels / channels.
- Keeps other channels of a pixel unchanged when adjusting one.

---

## üìÇ Repository Structure
```

esphome/
  components/
    ws2811_channels/
      __init__.py
      ws2811_channels.h
      ws2811_channels.cpp

````

---

## ‚öôÔ∏è Installation

Add the component via `external_components` in your ESPHome YAML:

```yaml
external_components:
  source:
    type: git
    url: https://github.com/semmel78/esphome_components/
    ref: main
  components: [ws2811_channels]
````

---

## üìù Example Configuration

### LED Strip

Define your WS2811 strip with `neopixelbus`:

```yaml
light:
  - platform: neopixelbus
    id: ws2811_strip
    internal: true
    pin: D4
    num_leds: 12        # number of WS2811 pixels
    type: GRB
    variant: WS2811
```

### Split into Channels

Now define the external component with one entry per channel:

```yaml
ws2811_channels:
  id: ws2811_ctrl
  strip_id: ws2811_strip
  channels:
    # Pixel 0
    - output_id: out_p0_r
      id: light_p0_r
      pixel: 0
      color: R
      name: "Pixel 1 - Red"
    - output_id: out_p0_g
      id: light_p0_g
      pixel: 0
      color: G
      name: "Pixel 1 - Green"
    - output_id: out_p0_b
      id: light_p0_b
      pixel: 0
      color: B
      name: "Pixel 1 - Blue"

    # Pixel 1
    - output_id: out_p1_r
      id: light_p1_r
      pixel: 1
      color: R
      name: "Pixel 2 - Red"
    - output_id: out_p1_g
      id: light_p1_g
      pixel: 1
      color: G
      name: "Pixel 2 - Green"
    - output_id: out_p1_b
      id: light_p1_b
      pixel: 1
      color: B
      name: "Pixel 2 - Blue"

    # ‚Ä¶ repeat for each pixel ‚Ä¶
```

For **12 pixels**, you‚Äôll end up with **36 entities**.

---

## üîß Parameters

* `strip_id` ‚Üí `id` of your `neopixelbus` strip.
* `channels` ‚Üí list of channel definitions.

  * `output_id` ‚Üí unique ID for the C++ light output.
  * `id` ‚Üí unique ID for the Home Assistant entity.
  * `pixel` ‚Üí pixel index (0-based).
  * `color` ‚Üí `"R"`, `"G"`, or `"B"`.
  * `name` ‚Üí optional entity name (autogenerated if omitted).

---

## üì∏ Home Assistant Example

After flashing, you‚Äôll see entities like:

* `light.pixel_1_red`
* `light.pixel_1_green`
* `light.pixel_1_blue`
* `light.pixel_2_red`
* ‚Ä¶

Each can be toggled or dimmed independently.

---

## üß∞ Development Notes

* Written against ESPHome `2025.8`.
* Uses `AddressableLight` API for per-pixel control.
* Traits advertise only `ColorMode::BRIGHTNESS` (monochrome).
* Defaults to `restore_mode: LIGHT_RESTORE_DEFAULT_OFF`.

---

## üôå Credits

Built with ‚ù§Ô∏è on top of [ESPHome](https://esphome.io/).

---

## üìú License

MIT License

